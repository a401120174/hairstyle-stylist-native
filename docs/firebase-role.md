# Firebase 的角色

## 概述

在 Hairstyle Stylist Native 專案中，Firebase 扮演著核心後端服務平台的角色，提供了完整的雲端基礎設施支援。

## 主要功能模組

### 1. 認證服務 (Firebase Authentication)

**用途：**
- 提供匿名用戶認證機制
- 管理用戶身份驗證和授權
- 支援開發環境的 Auth Emulator

**特色：**
- 匿名登入：用戶無需註冊即可使用應用
- 自動身份管理：為每個設備創建唯一的匿名用戶
- 安全性：確保用戶資料和操作的安全性

### 2. 雲端函數 (Firebase Functions)

**用途：**
- 作為後端 API 服務的載體
- 處理核心業務邏輯
- 提供伺服器端運算能力

**核心 API 功能：**
- **用戶點數管理**：查詢和更新用戶的點數餘額
- **髮型生成服務**：處理 AI 髮型轉換請求
- **內購驗證**：驗證 iOS App Store 收據的真實性
- **交易記錄**：管理用戶的購買和使用歷史

### 3. 資料庫服務 (Firestore)

**用途：**
- 儲存用戶資料和應用狀態
- 管理點數系統和交易記錄
- 提供即時資料同步

**資料結構：**
- 用戶資訊和設定
- 點數餘額和交易歷史
- 應用使用統計

### 4. 開發環境支援

**Emulator 整合：**
- **Auth Emulator**：本地認證服務測試
- **Functions Emulator**：本地 API 開發和測試
- **Firestore Emulator**：本地資料庫測試

**配置管理：**
- 開發/生產環境自動切換
- 安全的 API 金鑰管理
- 環境變數配置

## 技術特點

### 1. 安全性

- **服務端驗證**：所有敏感操作在 Firebase Functions 中執行
- **身份驗證**：每個 API 請求都需要有效的用戶 Token
- **資料加密**：傳輸和儲存過程中的資料保護

### 2. 可擴展性

- **自動擴展**：根據使用量自動調整資源
- **全球部署**：利用 Google 的全球基礎設施
- **高可用性**：99.9% 的服務可用性保證

### 3. 開發效率

- **統一平台**：認證、資料庫、函數在同一平台管理
- **即時監控**：內建的性能監控和錯誤追蹤
- **簡化部署**：一鍵部署和版本管理

## 專案中的實作

### 初始化配置

- 統一的 Firebase 初始化邏輯
- 多服務（Auth、Functions、Firestore）的集中管理
- 開發/生產環境的自動識別和配置

### API 服務層

- 基於 Firebase Functions 的 HTTP 可調用函數
- 標準化的錯誤處理和回應格式
- TypeScript 類型安全的 API 介面

### 狀態管理整合

- 與 React 生態系統的無縫整合
- 自動的用戶狀態同步
- 離線支援和資料快取

## 優勢

1. **降低開發複雜度**：無需自建後端基礎設施
2. **快速原型開發**：快速實現功能驗證
3. **成本效益**：按使用量計費，初期成本低
4. **維護簡單**：Google 負責基礎設施維護
5. **安全可靠**：企業級的安全性和可靠性保證